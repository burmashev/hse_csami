|                      |       |
|----------------------|-------|
| **Time limit:**      | `1 s` |
| **Real time limit:** | `5 s` |
| **Memory limit:**    | `64M` |


### Problem ku08-1: kr08-1 (дореш)

Мобильный оператор «Radio4» продаёт своим пользователям различные услуги, списывая оплату за них со
счетов пользователей. Вам предстоит заняться обработкой платежей на высокопроизводительном
центральном сервере компании.

Отдел подключения и отключения услуг разработал функцию подключения услуги:

    
    
    bool activate_service(size_t user_id, void* service);

Она либо подключает запрошенную услугу и возвращает true, либо, если подключение услуги невозможно,
возвращает false. Функция `activate_service` является потокобезопасной (thread-safe).

Напишите функцию с такой сигнатурой:

    
    
    bool place_order(_Atomic unsigned accounts[], size_t user_id, unsigned price, void* service);

Счёт пользователя хранится в переменной `accounts[user_id]`. Если у пользователя достаточно денег,
чтобы оплатить услугу (стоимостью price), то `place_order` должна зарезервировать соответствующую
сумму и попытаться подключить услугу с помощью `activate_service`. Если подключение услуги не
удалось, деньги должны быть возвращены пользователю.

Если деньги списаны, а услуга подключена, то функция возвращает true, иначе false.

Функцию `place_order` будут одновременно вызывать из разных потоков исполнения. Следите, чтобы ни
один пользователь не купил больше услуг, чем он может себе позволить, но и не получил
необоснованного отказа в их приобретении. Не используйте спинлоков и мьютексов, так как их
применение в сфере связи не сертифицировано Роскомнадзором.

Если один из платежей заблокировал деньги и пытается подключить услугу, можно считать
заблокированные деньги недоступными, даже если услугу подключить не удастся и они станут доступны
позже.

