<html><head><meta charset="utf-8"/></head>
<body>
<table border="1"><tr><td><b>Time limit:</b></td><td><tt>1 s</tt></td></tr>
<tr><td><b>Real time limit:</b></td><td><tt>5 s</tt></td></tr>
<tr><td><b>Memory limit:</b></td><td><tt>64M</tt></td></tr>
</table>
<h3>Problem sm16-1: unix/mplex/chat</h3>
<p>Напишите чат-сервер, который принимает подключения по протоколу TCP/IPv6
            и через Unix domain сокеты, а затем пересылает данные, полученные из любого
            сокета, во все остальные. При получении сигнала SIGTERM сервер должен успешно
            завершить работу.</p>
<p>Сервер запускается так:</p>
<pre>./chat_server TCP_PORT UNIX_SOCKET_FILENAME</pre>
<p>Если порт или файл заняты (там уже есть сервер), программа должна завершиться
            с кодом 1.</p>
<p>Используйте любой механизм мультиплексирования (select, poll или epoll).
            Считайте, что все клиенты быстро читают данные от сервера, так что
            при отправке данных системный вызов write не заблокируется.
            Не порождайте дополнительных процессов или потоков исполнения.</p>
<p>Помните, что при попытке записи в сокет, который клиент успел закрыть,
            будет порождён сигнал SIGPIPE. Это не должно привести к завершению работы
            сервера. Если обнаружилось, что клиент закрыл соединение,
            то пытаться отправлять в него данные больше не нужно.</p>
<p>Тестировать сервер можно, запустив одновременно несколько команд
            <code>nc ::1 <i>TCP_PORT</i></code>
            или <code>nc -U <i>UNIX_SOCKET_FILENAME</i></code>.</p>
</body></html>